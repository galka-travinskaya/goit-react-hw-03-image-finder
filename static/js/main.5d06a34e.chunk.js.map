{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","apiService/apiService.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleNameChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","alert","className","s","SearchForm","this","type","SearchForm__button","SearchForm__button_label","SearchForm__input","placeholder","onChange","Component","ImageGalleryItem","image","onClick","src","webformatURL","alt","tags","ImageGalleryItem__image","Button","onLoadMore","data-action","api","fetchImg","page","BASE_URL","API_KEY","fetch","then","res","ok","json","modalRoot","document","querySelector","Modal","onCloseOverlay","target","onToggleModal","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","Overlay","children","ImageGallery","images","error","status","showModal","largeImg","loadMore","prevState","toggleModal","handleClickImg","prevProps","prevName","imageName","nextName","prevPage","nextPage","imagesApi","totalHits","Promise","reject","Error","scrollTo","top","hits","catch","finally","documentElement","scrollHeight","behavior","ImageGallery__section","map","largeImageURL","id","message","color","length","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5d06a34e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery__section\":\"ImageGallery_ImageGallery__section__2DZlQ\",\"ImageGallery\":\"ImageGallery_ImageGallery__6BTVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2MpoW\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__1RB6C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2QF9c\",\"Modal\":\"Modal_Modal__CjQkx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3mhH9\"};","import { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleNameChange = e => {\r\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.query.trim() === '') {\r\n      alert('Пустое поле');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchForm__button}>\r\n            <span className={s.SearchForm__button_label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchForm__input}\r\n            type=\"text\"\r\n            // autocomplete=\"off\"\r\n            // autofocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function ImageGalleryItem({ image, onClick }) {\r\n  return (\r\n    <li className={s.ImageGalleryItem} onClick={onClick}>\r\n      <img\r\n        src={image.webformatURL}\r\n        alt={image.tags}\r\n        className={s.ImageGalleryItem__image}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  onClick: PropTypes.func,\r\n  image: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    webformatURL: PropTypes.string.isRequired,\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n","import { Component } from 'react';\r\nimport s from './Button.module.css';\r\n\r\nexport default class Button extends Component {\r\n  render() {\r\n    const { onLoadMore } = this.props;\r\n\r\n    return (\r\n      <button\r\n        data-action=\"loadMore\"\r\n        type=\"button\"\r\n        className={s.Button}\r\n        onClick={onLoadMore}\r\n      >\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","function fetchImg(query, page = 1) {\r\n  const BASE_URL = 'https://pixabay.com/api/';\r\n  const API_KEY = '19136435-96f0ae3906c94a349fe1f1440';\r\n\r\n  return fetch(\r\n    `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(res => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImg,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  onCloseOverlay = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.onCloseOverlay}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\n\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport imagesApi from '../../apiService/apiService';\r\nimport Modal from '../Modal/Modal';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    images: [],\r\n    page: 1,\r\n    error: null,\r\n    status: 'idle',\r\n    showModal: false,\r\n    largeImg: '',\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevName = prevProps.imageName;\r\n    const nextName = this.props.imageName;\r\n    const prevPage = prevState.page;\r\n    const nextPage = this.state.page;\r\n\r\n    if (prevName !== nextName) {\r\n      this.setState({ status: 'pending' });\r\n\r\n      imagesApi\r\n        .fetchImg(nextName)\r\n        .then(images => {\r\n          if (images.totalHits === 0) {\r\n            return Promise.reject(\r\n              new Error(`По поиску ${nextName} ничего не найдено`),\r\n            );\r\n          }\r\n          window.scrollTo({ top: 0 });\r\n          return this.setState({\r\n            images: [...images.hits],\r\n            page: 1,\r\n            status: 'resolved',\r\n          });\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n\r\n    if (prevPage !== nextPage && nextPage !== 1) {\r\n      this.setState({ status: 'pending' });\r\n\r\n      imagesApi\r\n        .fetchImg(nextName, nextPage)\r\n        .then(images => {\r\n          return this.setState(prevState => ({\r\n            images: [...prevState.images, ...images.hits],\r\n            status: 'resolved',\r\n          }));\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }))\r\n        .finally(res => {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  loadMore = () => {\r\n    this.setState(prevState => {\r\n      return { page: prevState.page + 1 };\r\n    });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  handleClickImg = largeImg => {\r\n    this.setState({ largeImg: largeImg });\r\n    this.toggleModal();\r\n  };\r\n\r\n  render() {\r\n    const { images, error, status, showModal, largeImg } = this.state;\r\n    return (\r\n      <div className={s.ImageGallery__section}>\r\n        {status === 'idle' && <p>Заполните поле</p>}\r\n        <ul className={s.ImageGallery}>\r\n          {images &&\r\n            images.map(image => (\r\n              <ImageGalleryItem\r\n                key={image.id}\r\n                image={image}\r\n                onClick={() => {\r\n                  this.handleClickImg(image.largeImageURL);\r\n                }}\r\n              />\r\n            ))}\r\n        </ul>\r\n        {status === 'rejected' && <h1>{error.message}</h1>}\r\n        {status === 'pending' && <Loader type=\"TailSpin\" color=\"#00BFFF\" />}\r\n        {(images.length > 0 || status === 'resolved') && (\r\n          <Button onLoadMore={this.loadMore} />\r\n        )}\r\n        {showModal && (\r\n          <Modal onToggleModal={this.toggleModal}>\r\n            <img src={largeImg} alt={images.tags} />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// import './App.css';\nimport { Component } from 'react';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    imageName: '',\n  };\n\n  handleFormSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.imageName} />\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1q1JQ\",\"SearchForm\":\"Searchbar_SearchForm__1Ua8X\",\"SearchForm__button\":\"Searchbar_SearchForm__button__2S8zq\",\"SearchForm__button_label\":\"Searchbar_SearchForm__button_label__32JuB\",\"SearchForm--input\":\"Searchbar_SearchForm--input__M5SUM\"};"],"sourceRoot":""}